{% load humanize %}

<div class="comment-item mb-3 {% if comment.parent %}ps-3 border-start border-2 border-body-secondary{% else %}ps-0{% endif %}">
    <div class="comment-body p-3 rounded bg-body-tertiary">
        <div class="d-flex justify-content-between align-items-start mb-2">
            <strong class="text-body">{{ comment.user.username }}</strong>
            <small class="text-secondary">{{ comment.datetime_created|naturaltime }}</small>
        </div>

        <p class="mb-2 text-body">{{ comment.text }}</p>

        <div class="d-flex justify-content-end">
            {% if user.is_authenticated %}
                <button type="button" class="reply-link btn btn-sm btn-outline-primary py-0 px-2"
                        data-parent="{{ comment.id }}"
                        aria-label="پاسخ به {{ comment.user.username }}">
                    پاسخ
                </button>
            {% endif %}

        </div>
    </div>

    <div class="replies mt-2">
        {% for reply in comment.replies.all %}
            {% include 'blog/includes/comment_item.html' with comment=reply %}
        {% endfor %}
    </div>
</div>
